<!DOCTYPE html><html lang="zh-cn" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Hexo主题开发心得 | 微小站</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - $1 行","copy":"code.copy","copyFinish":"code.copyFinish","expand":"code.expand"}}</script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
  --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
  --light-background: url('/img/bk.jpg');
}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><div id="shadow-header"></div><article><div id="post-bg"><div id="post-title"><h1>Hexo主题开发心得</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2023-07-01T13:10:03.000Z" id="date"> 2023-07-01</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2023-08-02T11:06:01.171Z" id="updated"> 2023-08-02</time></div></span></div></div><hr><div id="post-content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>别人是找到一个心仪的模板开开心心的用上了。我是找到一个心仪的模板，结果发现……啊！被作者给抛弃了。于是，这个不知深浅的小伙子开启了<del>在屎山代码里写屎山代码般的</del>重写复活主题之旅。</p>
<h1 id="吐槽的地方"><a href="#吐槽的地方" class="headerlink" title="吐槽的地方"></a>吐槽的地方</h1><h2 id="神奇的-ejs-语言"><a href="#神奇的-ejs-语言" class="headerlink" title="神奇的 ejs 语言"></a>神奇的 ejs 语言</h2><p>世界上有一个神奇的语言叫 <code>JavaScrip</code>，于是就“啪”的一下有了 <code>ejs</code>。<br>这样一个语言……确实有其实在的地方，可在大多数情况下给修 Bug 与优化代码实属添加了不少麻烦。好吧，在编写过程中 AI 还是帮了许多忙的，你所看到的界面几乎都有 AI 的身影。<del>这不是在说我全程摸鱼，我也查询了很多文档的欸！毕竟 AI 也给我写了很多 Bug ……</del></p>
<h2 id="神奇的报错"><a href="#神奇的报错" class="headerlink" title="神奇的报错"></a>神奇的报错</h2><p>报错永远不会迟到，但是可能会令人捉摸不透。Hexo 的报错信息还是不够详细，我指其指向精确度。下面是一段报错信息，其中 <code>***</code> 代表的是同一目录名称。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SyntaxError: Unexpected token &#x27;var&#x27; in E:\***\themes\mdui\layout\drawerContent\posts.ejs while compiling ejs</span><br><span class="line"></span><br><span class="line">If the above error is not helpful, you may want to try EJS-Lint:</span><br><span class="line">https://github.com/RyanZim/EJS-Lint</span><br><span class="line">Or, if you meant to create an async function, pass `async: true` as an option.</span><br><span class="line">    at new Function (&lt;anonymous&gt;)</span><br><span class="line">    at Template.compile (E:\***\node_modules\ejs\lib\ejs.js:673:12)</span><br><span class="line">    at Object.compile (E:\***\node_modules\ejs\lib\ejs.js:398:16)</span><br><span class="line">    at ejsRenderer.compile (E:\***\node_modules\hexo-renderer-ejs\lib\renderer.js:10:14)</span><br><span class="line">    at _View._precompile (E:\***\node_modules\hexo\lib\theme\view.js:129:33)</span><br><span class="line">    at new View (E:\***\node_modules\hexo\lib\theme\view.js:27:10)</span><br><span class="line">    at new _View (E:\***\node_modules\hexo\lib\theme\index.js:33:5)</span><br><span class="line">    at Theme.setView (E:\***\node_modules\hexo\lib\theme\index.js:65:18)</span><br><span class="line">    at E:\***\node_modules\hexo\lib\theme\processors\view.js:14:14</span><br><span class="line">    at tryCatcher (E:\***\node_modules\bluebird\js\release\util.js:16:23)</span><br><span class="line">    at Promise._settlePromiseFromHandler (E:\***\node_modules\bluebird\js\release\promise.js:547:31)</span><br><span class="line">    at Promise._settlePromise (E:\***\node_modules\bluebird\js\release\promise.js:604:18)</span><br><span class="line">    at Promise._settlePromise0 (E:\***\node_modules\bluebird\js\release\promise.js:649:10)</span><br><span class="line">    at Promise._settlePromises (E:\***\node_modules\bluebird\js\release\promise.js:729:18)</span><br><span class="line">    at _drainQueueStep (E:\***\node_modules\bluebird\js\release\async.js:93:12)</span><br><span class="line">    at _drainQueue (E:\***\node_modules\bluebird\js\release\async.js:86:9)</span><br><span class="line">    at Async._drainQueues (E:\***\node_modules\bluebird\js\release\async.js:102:5)</span><br><span class="line">    at Async.drainQueues [as _onImmediate] (E:\***\node_modules\bluebird\js\release\async.js:15:14)</span><br><span class="line">    at process.processImmediate (node:internal/timers:476:21)</span><br></pre></td></tr></table></figure>

<p>是的，当初我在修复这个问题的时候遇到了许多困难。搜索、阅读文档数次，求助于 AI 数次无果。当我正要放弃这个功能的时候，我尝试让 AI 重写一遍部分代码，终于，成功修复了这个该死的问题（这消磨了我一个晚上）。</p>
<h2 id="遮遮掩掩的官方文档"><a href="#遮遮掩掩的官方文档" class="headerlink" title="遮遮掩掩的官方文档"></a>遮遮掩掩的官方文档</h2><p>我本以为官方文档会详细介绍每个页面有哪些变量以及这些变量的结构。谁知，文档直接告诉你：这个页面有这个变量。</p>
<p>所以，当你困顿于变量究竟长什么样时 <code>console.log()</code> 一下是非常必要的。</p>
<h1 id="开发感悟"><a href="#开发感悟" class="headerlink" title="开发感悟"></a>开发感悟</h1><h2 id="一定，一定要追求可读性！"><a href="#一定，一定要追求可读性！" class="headerlink" title="一定，一定要追求可读性！"></a>一定，一定要追求可读性！</h2><p>我接手这一堆代码的时候，发现这些代码耦合程度比较高，尤其是 <code>drawer</code> 这一块。还有一些不明不白无实际意义的代码，就比如下面这个。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="keyword">var</span> bug = <span class="number">0</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--传统技艺不能丢--&gt;</span></span><br></pre></td></tr></table></figure>

<p>What’s up? 为什么要在每个页面都命名一个变量并且令其等于 0？操作很是迷惑人啊。而且这注释，这注释告诉我这是 <code>传统技艺</code>。哦，伙计，这是你的开源项目，会有其他开发者加入代码的编写工作，不要随意加入自己的各类习惯砸！</p>
<h2 id="一定，一定要分类文件"><a href="#一定，一定要分类文件" class="headerlink" title="一定，一定要分类文件"></a>一定，一定要分类文件</h2><p>最初，这项目的文件全堆在 <code>layout</code> 以及其中的 <code>_MDUI</code> 文件夹里。啊，很难想象最初的作者是怎么开发出来的，光是找文件就要花点时间。但还好文件数量不多，最后也被我细致地分类好了。这方面至少坑不大。</p>
<h1 id="后言"><a href="#后言" class="headerlink" title="后言"></a>后言</h1><p>这个主题的原作者可能是真的不想开发了，很多页面都没有写，或者写的并不好。至少这个小站经过几次迭代后，也是很像样了……</p>
<p>之后……不折腾了，直接用现成的！</p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2023/07/02/%E7%BD%91%E5%BF%83%E4%BA%91%E5%88%B7%E6%9C%BA/">← 下一篇 网心云刷机</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/06/30/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/">测试文章 上一篇 →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧</a><a class="i-index" id="to-index" href="#toc-div" title="文章目录">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">tang_ge</a></h1><div id="description"><p>一个学生党的博客</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/tangge233"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/39564659"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%90%E6%A7%BD%E7%9A%84%E5%9C%B0%E6%96%B9"><span class="toc-number">2.</span> <span class="toc-text">吐槽的地方</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A5%9E%E5%A5%87%E7%9A%84-ejs-%E8%AF%AD%E8%A8%80"><span class="toc-number">2.1.</span> <span class="toc-text">神奇的 ejs 语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A5%9E%E5%A5%87%E7%9A%84%E6%8A%A5%E9%94%99"><span class="toc-number">2.2.</span> <span class="toc-text">神奇的报错</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%AE%E9%81%AE%E6%8E%A9%E6%8E%A9%E7%9A%84%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="toc-number">2.3.</span> <span class="toc-text">遮遮掩掩的官方文档</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%84%9F%E6%82%9F"><span class="toc-number">3.</span> <span class="toc-text">开发感悟</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AE%9A%EF%BC%8C%E4%B8%80%E5%AE%9A%E8%A6%81%E8%BF%BD%E6%B1%82%E5%8F%AF%E8%AF%BB%E6%80%A7%EF%BC%81"><span class="toc-number">3.1.</span> <span class="toc-text">一定，一定要追求可读性！</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AE%9A%EF%BC%8C%E4%B8%80%E5%AE%9A%E8%A6%81%E5%88%86%E7%B1%BB%E6%96%87%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">一定，一定要分类文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E8%A8%80"><span class="toc-number">4.</span> <span class="toc-text">后言</span></a></li></ol></div></div><footer><nobr><span class="icp-title">0</span><span class="icp-content">Copyright © 2023 tang_ge</span></nobr><br><nobr><span class="icp-title">1</span><span class="icp-content">Powered by GitHub Page</span></nobr><br><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside><div id="shadow-aside"></div></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>